
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.43">
    
    
      
        <title>Subtitles AI API Reference</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Subtitles AI API Reference" class="md-header__button md-logo" aria-label="Subtitles AI API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Subtitles AI API Reference
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/abdeladim-s/subsai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    abdeladim-s/subsai
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="." class="md-tabs__link">
        
  
    
  
  API Reference

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Subtitles AI API Reference" class="md-nav__button md-logo" aria-label="Subtitles AI API Reference" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Subtitles AI API Reference
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/abdeladim-s/subsai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    abdeladim-s/subsai
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#subsai.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
    <nav class="md-nav" aria-label="main">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.main.SubsAI" class="md-nav__link">
    <span class="md-ellipsis">
      SubsAI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SubsAI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.main.SubsAI.available_models" class="md-nav__link">
    <span class="md-ellipsis">
      available_models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.SubsAI.model_info" class="md-nav__link">
    <span class="md-ellipsis">
      model_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.SubsAI.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.SubsAI.create_model" class="md-nav__link">
    <span class="md-ellipsis">
      create_model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.SubsAI.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.Tools" class="md-nav__link">
    <span class="md-ellipsis">
      Tools
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.main.Tools.available_translation_models" class="md-nav__link">
    <span class="md-ellipsis">
      available_translation_models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.Tools.available_translation_languages" class="md-nav__link">
    <span class="md-ellipsis">
      available_translation_languages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.Tools.create_translation_model" class="md-nav__link">
    <span class="md-ellipsis">
      create_translation_model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.Tools.translate" class="md-nav__link">
    <span class="md-ellipsis">
      translate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.Tools.auto_sync" class="md-nav__link">
    <span class="md-ellipsis">
      auto_sync
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.main.Tools.merge_subs_with_video" class="md-nav__link">
    <span class="md-ellipsis">
      merge_subs_with_video
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subsai.models" class="md-nav__link">
    <span class="md-ellipsis">
      models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.abstract_model" class="md-nav__link">
    <span class="md-ellipsis">
      abstract_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="abstract_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.abstract_model.AbstractModel" class="md-nav__link">
    <span class="md-ellipsis">
      AbstractModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AbstractModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.abstract_model.AbstractModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.abstract_model.AbstractModel.model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.abstract_model.AbstractModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.faster_whisper_model" class="md-nav__link">
    <span class="md-ellipsis">
      faster_whisper_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="faster_whisper_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.faster_whisper_model.FasterWhisperModel" class="md-nav__link">
    <span class="md-ellipsis">
      FasterWhisperModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FasterWhisperModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.faster_whisper_model.FasterWhisperModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.faster_whisper_model.FasterWhisperModel.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.faster_whisper_model.FasterWhisperModel.transcribe_configs" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe_configs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.faster_whisper_model.FasterWhisperModel.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.faster_whisper_model.FasterWhisperModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model" class="md-nav__link">
    <span class="md-ellipsis">
      hugging_face_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="hugging_face_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model.devices" class="md-nav__link">
    <span class="md-ellipsis">
      devices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model.HuggingFaceModel" class="md-nav__link">
    <span class="md-ellipsis">
      HuggingFaceModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HuggingFaceModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model.HuggingFaceModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model.HuggingFaceModel.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model.HuggingFaceModel.segment_type" class="md-nav__link">
    <span class="md-ellipsis">
      segment_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model.HuggingFaceModel.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.hugging_face_model.HuggingFaceModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.stable_ts_model" class="md-nav__link">
    <span class="md-ellipsis">
      stable_ts_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="stable_ts_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.stable_ts_model.StableTsModel" class="md-nav__link">
    <span class="md-ellipsis">
      StableTsModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StableTsModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.stable_ts_model.StableTsModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.stable_ts_model.StableTsModel.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.stable_ts_model.StableTsModel.transcribe_configs" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe_configs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.stable_ts_model.StableTsModel.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.stable_ts_model.StableTsModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model" class="md-nav__link">
    <span class="md-ellipsis">
      whisperX_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="whisperX_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel" class="md-nav__link">
    <span class="md-ellipsis">
      WhisperXModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WhisperXModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.model_type" class="md-nav__link">
    <span class="md-ellipsis">
      model_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.device" class="md-nav__link">
    <span class="md-ellipsis">
      device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.compute_type" class="md-nav__link">
    <span class="md-ellipsis">
      compute_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.download_root" class="md-nav__link">
    <span class="md-ellipsis">
      download_root
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.language" class="md-nav__link">
    <span class="md-ellipsis">
      language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.segment_type" class="md-nav__link">
    <span class="md-ellipsis">
      segment_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.batch_size" class="md-nav__link">
    <span class="md-ellipsis">
      batch_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.return_char_alignments" class="md-nav__link">
    <span class="md-ellipsis">
      return_char_alignments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.speaker_labels" class="md-nav__link">
    <span class="md-ellipsis">
      speaker_labels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.HF_TOKEN" class="md-nav__link">
    <span class="md-ellipsis">
      HF_TOKEN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.min_speakers" class="md-nav__link">
    <span class="md-ellipsis">
      min_speakers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.max_speakers" class="md-nav__link">
    <span class="md-ellipsis">
      max_speakers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisperX_model.WhisperXModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model" class="md-nav__link">
    <span class="md-ellipsis">
      whisper_api_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="whisper_api_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.TMPDIR" class="md-nav__link">
    <span class="md-ellipsis">
      TMPDIR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.OPENAI_API_SIZE_LIMIT_MB" class="md-nav__link">
    <span class="md-ellipsis">
      OPENAI_API_SIZE_LIMIT_MB
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel" class="md-nav__link">
    <span class="md-ellipsis">
      WhisperAPIModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WhisperAPIModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.model_type" class="md-nav__link">
    <span class="md-ellipsis">
      model_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.api_key" class="md-nav__link">
    <span class="md-ellipsis">
      api_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.language" class="md-nav__link">
    <span class="md-ellipsis">
      language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.prompt" class="md-nav__link">
    <span class="md-ellipsis">
      prompt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.temperature" class="md-nav__link">
    <span class="md-ellipsis">
      temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.client" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.chunk_audio" class="md-nav__link">
    <span class="md-ellipsis">
      chunk_audio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.WhisperAPIModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.split_filename" class="md-nav__link">
    <span class="md-ellipsis">
      split_filename
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_api_model.convert_video_to_audio_ffmpeg" class="md-nav__link">
    <span class="md-ellipsis">
      convert_video_to_audio_ffmpeg
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model" class="md-nav__link">
    <span class="md-ellipsis">
      whisper_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="whisper_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel" class="md-nav__link">
    <span class="md-ellipsis">
      WhisperModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WhisperModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.model_type" class="md-nav__link">
    <span class="md-ellipsis">
      model_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.device" class="md-nav__link">
    <span class="md-ellipsis">
      device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.download_root" class="md-nav__link">
    <span class="md-ellipsis">
      download_root
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.in_memory" class="md-nav__link">
    <span class="md-ellipsis">
      in_memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      verbose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.temperature" class="md-nav__link">
    <span class="md-ellipsis">
      temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.compression_ratio_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      compression_ratio_threshold
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.logprob_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      logprob_threshold
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.no_speech_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      no_speech_threshold
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.condition_on_previous_text" class="md-nav__link">
    <span class="md-ellipsis">
      condition_on_previous_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.decode_options" class="md-nav__link">
    <span class="md-ellipsis">
      decode_options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_model.WhisperModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model" class="md-nav__link">
    <span class="md-ellipsis">
      whisper_timestamped_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="whisper_timestamped_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped" class="md-nav__link">
    <span class="md-ellipsis">
      WhisperTimeStamped
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WhisperTimeStamped">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.model_type" class="md-nav__link">
    <span class="md-ellipsis">
      model_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.segment_type" class="md-nav__link">
    <span class="md-ellipsis">
      segment_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.device" class="md-nav__link">
    <span class="md-ellipsis">
      device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.download_root" class="md-nav__link">
    <span class="md-ellipsis">
      download_root
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.in_memory" class="md-nav__link">
    <span class="md-ellipsis">
      in_memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.verbose" class="md-nav__link">
    <span class="md-ellipsis">
      verbose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.temperature" class="md-nav__link">
    <span class="md-ellipsis">
      temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.compression_ratio_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      compression_ratio_threshold
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.logprob_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      logprob_threshold
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.no_speech_threshold" class="md-nav__link">
    <span class="md-ellipsis">
      no_speech_threshold
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.condition_on_previous_text" class="md-nav__link">
    <span class="md-ellipsis">
      condition_on_previous_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.decode_options" class="md-nav__link">
    <span class="md-ellipsis">
      decode_options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whisper_timestamped_model.WhisperTimeStamped.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model" class="md-nav__link">
    <span class="md-ellipsis">
      whispercpp_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="whispercpp_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model.WhisperCppModel" class="md-nav__link">
    <span class="md-ellipsis">
      WhisperCppModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WhisperCppModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model.WhisperCppModel.model_name" class="md-nav__link">
    <span class="md-ellipsis">
      model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model.WhisperCppModel.config_schema" class="md-nav__link">
    <span class="md-ellipsis">
      config_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model.WhisperCppModel.model_type" class="md-nav__link">
    <span class="md-ellipsis">
      model_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model.WhisperCppModel.params" class="md-nav__link">
    <span class="md-ellipsis">
      params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model.WhisperCppModel.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.models.whispercpp_model.WhisperCppModel.transcribe" class="md-nav__link">
    <span class="md-ellipsis">
      transcribe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subsai.configs" class="md-nav__link">
    <span class="md-ellipsis">
      configs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="configs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subsai.configs.AVAILABLE_MODELS" class="md-nav__link">
    <span class="md-ellipsis">
      AVAILABLE_MODELS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.configs.BASIC_TOOLS_CONFIGS" class="md-nav__link">
    <span class="md-ellipsis">
      BASIC_TOOLS_CONFIGS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subsai.configs.ADVANCED_TOOLS_CONFIGS" class="md-nav__link">
    <span class="md-ellipsis">
      ADVANCED_TOOLS_CONFIGS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="api-reference">API Reference</h1>
<p>️🎞 Subtitles generation tool (Web-UI + CLI + Python package) powered by OpenAI's Whisper and its variants 🎞️</p>


<div class="doc doc-object doc-module">



<h2 id="subsai.main" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">subsai.main</span>


</h2>

    <div class="doc doc-contents first">

        <p>SubsAI: Subtitles AI
Subtitles generation tool powered by OpenAI's Whisper and its variants.</p>
<p>This program is free software: you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option) any later
version.
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
You should have received a copy of the GNU General Public License along with
this program. If not, see <a href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="subsai.main.SubsAI" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">SubsAI</span>


</h3>


    <div class="doc doc-contents ">


        <p>Subs AI class</p>
<p>Example usage:
<div class="language-python highlight"><pre><span></span><code><span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;./assets/test1.mp4&#39;</span>
<span class="n">subs_ai</span> <span class="o">=</span> <span class="n">SubsAI</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">subs_ai</span><span class="o">.</span><span class="n">create_model</span><span class="p">(</span><span class="s1">&#39;openai/whisper&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;model_type&#39;</span><span class="p">:</span> <span class="s1">&#39;base&#39;</span><span class="p">})</span>
<span class="n">subs</span> <span class="o">=</span> <span class="n">subs_ai</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
<span class="n">subs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;test1.srt&#39;</span><span class="p">)</span>
</code></pre></div></p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="subsai.main.SubsAI.available_models" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">available_models</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">available_models</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the supported models</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>list</code>
          –
          <div class="doc-md-description">
            <p>list of available models</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">available_models</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the supported models</span>

<span class="sd">    :return: list of available models</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">AVAILABLE_MODELS</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.SubsAI.model_info" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">model_info</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">model_info</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns general infos about the model (brief description and url)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>model</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>model name</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>dict</code>
          –
          <div class="doc-md-description">
            <p>dict of infos</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">model_info</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns general infos about the model (brief description and url)</span>

<span class="sd">    :param model: model name</span>

<span class="sd">    :return: dict of infos</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">AVAILABLE_MODELS</span><span class="p">[</span><span class="n">model</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">],</span>
            <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">AVAILABLE_MODELS</span><span class="p">[</span><span class="n">model</span><span class="p">][</span><span class="s1">&#39;url&#39;</span><span class="p">]}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.SubsAI.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">config_schema</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the configs associated with a model</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>model</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>model name</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>dict</code>
          –
          <div class="doc-md-description">
            <p>dict of configs</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">config_schema</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the configs associated with a model</span>

<span class="sd">    :param model: model name</span>

<span class="sd">    :return: dict of configs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">AVAILABLE_MODELS</span><span class="p">[</span><span class="n">model</span><span class="p">][</span><span class="s1">&#39;config_schema&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.SubsAI.create_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">create_model</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">model_config</span><span class="o">=</span><span class="p">{})</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns a model instance</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>model_name</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>the name of the model</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>model_config</code></b>
              (<code>dict</code>, default:
                  <code>{}</code>
)
          –
          <div class="doc-md-description">
            <p>the configuration dict</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code>
          –
          <div class="doc-md-description">
            <p>the model instance</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">create_model</span><span class="p">(</span><span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model_config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">AbstractModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a model instance</span>

<span class="sd">    :param model_name: the name of the model</span>
<span class="sd">    :param model_config: the configuration dict</span>

<span class="sd">    :return: the model instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">AVAILABLE_MODELS</span><span class="p">[</span><span class="n">model_name</span><span class="p">][</span><span class="s1">&#39;class&#39;</span><span class="p">](</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.SubsAI.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">model_config</span><span class="o">=</span><span class="p">{})</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Takes the model instance (created by :func:<code>create_model</code>) or the model name.
Returns a :class:<code>pysubs2.SSAFile</code> <a href="https://pysubs2.readthedocs.io/en/latest/api-reference.html#ssafile-a-subtitle-file">https://pysubs2.readthedocs.io/en/latest/api-reference.html#ssafile-a-subtitle-file</a>`_</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>media_file</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>path of the media file (video/audio)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>model</code></b>
              (<code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a>, str]</code>)
          –
          <div class="doc-md-description">
            <p>model instance or model name</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>model_config</code></b>
              (<code>dict</code>, default:
                  <code>{}</code>
)
          –
          <div class="doc-md-description">
            <p>model configs' dict</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="pysubs2.SSAFile">SSAFile</span></code>
          –
          <div class="doc-md-description">
            <p>SSAFile: list of subtitles</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AbstractModel</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">model_config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">SSAFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes the model instance (created by :func:`create_model`) or the model name.</span>
<span class="sd">    Returns a :class:`pysubs2.SSAFile` &lt;https://pysubs2.readthedocs.io/en/latest/api-reference.html#ssafile-a-subtitle-file&gt;`_</span>

<span class="sd">    :param media_file: path of the media file (video/audio)</span>
<span class="sd">    :param model: model instance or model name</span>
<span class="sd">    :param model_config: model configs&#39; dict</span>

<span class="sd">    :return: SSAFile: list of subtitles</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">stt_model</span> <span class="o">=</span> <span class="n">SubsAI</span><span class="o">.</span><span class="n">create_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">model_config</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stt_model</span> <span class="o">=</span> <span class="n">model</span>
    <span class="n">media_file</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">stt_model</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="subsai.main.Tools" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Tools</span>


</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">Tools</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Some tools related to subtitles processing (ex: translation)</p>






                  <details class="quote">
                    <summary>Source code in <code>src/subsai/main.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="subsai.main.Tools.available_translation_models" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">available_translation_models</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">available_translation_models</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns available translation models
A simple link to :func:<code>utils.available_translation_models</code> for easy access</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>list</code>
          –
          <div class="doc-md-description">
            <p>list of available models</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">available_translation_models</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns available translation models</span>
<span class="sd">    A simple link to :func:`utils.available_translation_models` for easy access</span>

<span class="sd">    :return: list of available models</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">available_translation_models</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.Tools.available_translation_languages" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">available_translation_languages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">available_translation_languages</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the languages supported by the translation model</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>model</code></b>
              (<code><span title="typing.Union">Union</span>[str, <span title="dl_translate.TranslationModel">TranslationModel</span>]</code>)
          –
          <div class="doc-md-description">
            <p>the name of the model</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>list</code>
          –
          <div class="doc-md-description">
            <p>list of available languages</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">available_translation_languages</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TranslationModel</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the languages supported by the translation model</span>

<span class="sd">    :param model: the name of the model</span>
<span class="sd">    :return: list of available languages</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">langs</span> <span class="o">=</span> <span class="n">Tools</span><span class="o">.</span><span class="n">create_translation_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span><span class="o">.</span><span class="n">available_languages</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">langs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">available_languages</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">langs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.Tools.create_translation_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_translation_model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">create_translation_model</span><span class="p">(</span>
    <span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;m2m100&quot;</span><span class="p">,</span> <span class="n">model_family</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates and returns a translation model instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>model_name</code></b>
              (<code>str</code>, default:
                  <code>&#39;m2m100&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>name of the model. To get available models use :func:<code>available_translation_models</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>model_family</code></b>
              (<code>str</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Either "mbart50" or "m2m100". By default, See <code>dl-translate</code> docs</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="dl_translate.TranslationModel">TranslationModel</span></code>
          –
          <div class="doc-md-description">
            <p>A translation model instance</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">create_translation_model</span><span class="p">(</span><span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;m2m100&quot;</span><span class="p">,</span> <span class="n">model_family</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TranslationModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates and returns a translation model instance.</span>

<span class="sd">    :param model_name: name of the model. To get available models use :func:`available_translation_models`</span>
<span class="sd">    :param model_family: Either &quot;mbart50&quot; or &quot;m2m100&quot;. By default, See `dl-translate` docs</span>
<span class="sd">    :return: A translation model instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mt</span> <span class="o">=</span> <span class="n">TranslationModel</span><span class="p">(</span><span class="n">model_or_path</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span> <span class="n">model_family</span><span class="o">=</span><span class="n">model_family</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mt</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.Tools.translate" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">translate</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">translate</span><span class="p">(</span>
    <span class="n">subs</span><span class="p">,</span>
    <span class="n">source_language</span><span class="p">,</span>
    <span class="n">target_language</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;m2m100&quot;</span><span class="p">,</span>
    <span class="n">model_family</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">translation_configs</span><span class="o">=</span><span class="p">{},</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Translates a subtitles <code>SSAFile</code> object, what :func:<code>SubsAI.transcribe</code> is returning</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>subs</code></b>
              (<code><span title="pysubs2.SSAFile">SSAFile</span></code>)
          –
          <div class="doc-md-description">
            <p><code>SSAFile</code> object</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>source_language</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>the language of the subtitles</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>target_language</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>the target language</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>model</code></b>
              (<code><span title="typing.Union">Union</span>[str, <span title="dl_translate.TranslationModel">TranslationModel</span>]</code>, default:
                  <code>&#39;m2m100&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>the translation model, either an <code>str</code> or the model instance created by :func:<code>create_translation_model</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>model_family</code></b>
              (<code>str</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Either "mbart50" or "m2m100". By default, See <code>dl-translate</code> docs</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>translation_configs</code></b>
              (<code>dict</code>, default:
                  <code>{}</code>
)
          –
          <div class="doc-md-description">
            <p>dict of translation configs (see :attr:<code>configs.ADVANCED_TOOLS_CONFIGS</code>)</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="pysubs2.SSAFile">SSAFile</span></code>
          –
          <div class="doc-md-description">
            <p>returns an <code>SSAFile</code> subtitles translated to the target language</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="n">subs</span><span class="p">:</span> <span class="n">SSAFile</span><span class="p">,</span>
              <span class="n">source_language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
              <span class="n">target_language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
              <span class="n">model</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TranslationModel</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;m2m100&quot;</span><span class="p">,</span>
              <span class="n">model_family</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
              <span class="n">translation_configs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">SSAFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Translates a subtitles `SSAFile` object, what :func:`SubsAI.transcribe` is returning</span>

<span class="sd">    :param subs: `SSAFile` object</span>
<span class="sd">    :param source_language: the language of the subtitles</span>
<span class="sd">    :param target_language: the target language</span>
<span class="sd">    :param model: the translation model, either an `str` or the model instance created by</span>
<span class="sd">                    :func:`create_translation_model`</span>
<span class="sd">    :param model_family: Either &quot;mbart50&quot; or &quot;m2m100&quot;. By default, See `dl-translate` docs</span>
<span class="sd">    :param translation_configs: dict of translation configs (see :attr:`configs.ADVANCED_TOOLS_CONFIGS`)</span>

<span class="sd">    :return: returns an `SSAFile` subtitles translated to the target language</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">model</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">translation_model</span> <span class="o">=</span> <span class="n">Tools</span><span class="o">.</span><span class="n">create_translation_model</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">model_family</span><span class="o">=</span><span class="n">model_family</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">translation_model</span> <span class="o">=</span> <span class="n">model</span>

    <span class="n">translated_subs</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">:</span>
        <span class="n">translated_sub</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">translated_sub</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">translation_model</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
                                                          <span class="n">source</span><span class="o">=</span><span class="n">source_language</span><span class="p">,</span>
                                                          <span class="n">target</span><span class="o">=</span><span class="n">target_language</span><span class="p">,</span>
                                                          <span class="n">batch_size</span><span class="o">=</span><span class="n">translation_configs</span><span class="p">[</span>
                                                              <span class="s1">&#39;batch_size&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;batch_size&#39;</span> <span class="ow">in</span> <span class="n">translation_configs</span> <span class="k">else</span> <span class="mi">32</span><span class="p">,</span>
                                                          <span class="n">verbose</span><span class="o">=</span><span class="n">translation_configs</span><span class="p">[</span>
                                                              <span class="s1">&#39;verbose&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;verbose&#39;</span> <span class="ow">in</span> <span class="n">translation_configs</span> <span class="k">else</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">translated_subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">translated_sub</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">translated_subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.Tools.auto_sync" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">auto_sync</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">auto_sync</span><span class="p">(</span><span class="n">subs</span><span class="p">,</span> <span class="n">media_file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Uses (ffsubsync)[https://github.com/smacke/ffsubsync] to auto-sync subtitles to the media file</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>subs</code></b>
              (<code><span title="pysubs2.SSAFile">SSAFile</span></code>)
          –
          <div class="doc-md-description">
            <p><code>SSAFile</code> file</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>media_file</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>path of the media_file</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>kwargs</code></b>
          –
          <div class="doc-md-description">
            <p>configs to pass to ffsubsync (see :attr:<code>configs.ADVANCED_TOOLS_CONFIGS</code>)</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="pysubs2.SSAFile">SSAFile</span></code>
          –
          <div class="doc-md-description">
            <p><code>SSAFile</code> auto-synced</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">auto_sync</span><span class="p">(</span><span class="n">subs</span><span class="p">:</span> <span class="n">SSAFile</span><span class="p">,</span>
              <span class="n">media_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
              <span class="o">**</span><span class="n">kwargs</span>
              <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SSAFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uses (ffsubsync)[https://github.com/smacke/ffsubsync] to auto-sync subtitles to the media file</span>

<span class="sd">    :param subs: `SSAFile` file</span>
<span class="sd">    :param media_file: path of the media_file</span>
<span class="sd">    :param kwargs: configs to pass to ffsubsync (see :attr:`configs.ADVANCED_TOOLS_CONFIGS`)</span>

<span class="sd">    :return: `SSAFile` auto-synced</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">make_parser</span><span class="p">()</span>
    <span class="n">srtin_file</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">srtout_file</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">srtin</span> <span class="o">=</span> <span class="n">srtin_file</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.ass&#39;</span>
        <span class="n">srtout</span> <span class="o">=</span> <span class="n">srtout_file</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.srt&#39;</span>
        <span class="n">subs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">srtin</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span><span class="n">media_file</span><span class="p">,</span>
               <span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="n">srtin</span><span class="p">,</span>
               <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="n">srtout</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">config_name</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">config_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">cmd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;--</span><span class="si">{</span><span class="n">config_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cmd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;--</span><span class="si">{</span><span class="n">config_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">cmd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">parsed_args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">parsed_args</span><span class="p">)[</span><span class="s2">&quot;retval&quot;</span><span class="p">]</span>
        <span class="n">synced_subs</span> <span class="o">=</span> <span class="n">pysubs2</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">srtout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">synced_subs</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">srtin_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">srtin_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">srtout_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">srtout_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.main.Tools.merge_subs_with_video" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">merge_subs_with_video</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">merge_subs_with_video</span><span class="p">(</span>
    <span class="n">subs</span><span class="p">,</span> <span class="n">media_file</span><span class="p">,</span> <span class="n">output_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Uses ffmpeg to merge subtitles into a video media file.
You cna merge multiple subs at the same time providing a dict with (lang,<code>SSAFile</code> object) key,value pairs
Example:
<div class="language-python highlight"><pre><span></span><code>    <span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;../../assets/video/test1.webm&#39;</span>
    <span class="n">subs_ai</span> <span class="o">=</span> <span class="n">SubsAI</span><span class="p">()</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">subs_ai</span><span class="o">.</span><span class="n">create_model</span><span class="p">(</span><span class="s1">&#39;openai/whisper&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;model_type&#39;</span><span class="p">:</span> <span class="s1">&#39;tiny&#39;</span><span class="p">})</span>
    <span class="n">en_subs</span> <span class="o">=</span> <span class="n">subs_ai</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
    <span class="n">ar_subs</span> <span class="o">=</span> <span class="n">pysubs2</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;../../assets/video/test0-ar.srt&#39;</span><span class="p">)</span>
    <span class="n">Tools</span><span class="o">.</span><span class="n">merge_subs_with_video2</span><span class="p">({</span><span class="s1">&#39;English&#39;</span><span class="p">:</span> <span class="n">subs</span><span class="p">,</span> <span class="s2">&quot;Arabic&quot;</span><span class="p">:</span> <span class="n">subs2</span><span class="p">},</span> <span class="n">file</span><span class="p">)</span>
</code></pre></div></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>subs</code></b>
              (<code><span title="typing.Dict">Dict</span>[str, <span title="pysubs2.SSAFile">SSAFile</span>]</code>)
          –
          <div class="doc-md-description">
            <p>dict with (lang,<code>SSAFile</code> object) key,value pairs</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>media_file</code></b>
              (<code>str</code>)
          –
          <div class="doc-md-description">
            <p>path of the video media_file</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>output_filename</code></b>
              (<code>str</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Output file name (without the extension as it will be inferred from the media file)</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>str</code>
          –
          <div class="doc-md-description">
            <p>Absolute path of the output file</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/main.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">merge_subs_with_video</span><span class="p">(</span><span class="n">subs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SSAFile</span><span class="p">],</span>
              <span class="n">media_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
              <span class="n">output_filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
              <span class="o">**</span><span class="n">kwargs</span>
              <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uses ffmpeg to merge subtitles into a video media file.</span>
<span class="sd">    You cna merge multiple subs at the same time providing a dict with (lang,`SSAFile` object) key,value pairs</span>
<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">        file = &#39;../../assets/video/test1.webm&#39;</span>
<span class="sd">        subs_ai = SubsAI()</span>
<span class="sd">        model = subs_ai.create_model(&#39;openai/whisper&#39;, {&#39;model_type&#39;: &#39;tiny&#39;})</span>
<span class="sd">        en_subs = subs_ai.transcribe(file, model)</span>
<span class="sd">        ar_subs = pysubs2.load(&#39;../../assets/video/test0-ar.srt&#39;)</span>
<span class="sd">        Tools.merge_subs_with_video2({&#39;English&#39;: subs, &quot;Arabic&quot;: subs2}, file)</span>
<span class="sd">    ```</span>

<span class="sd">    :param subs: dict with (lang,`SSAFile` object) key,value pairs</span>
<span class="sd">    :param media_file: path of the video media_file</span>
<span class="sd">    :param output_filename: Output file name (without the extension as it will be inferred from the media file)</span>

<span class="sd">    :return: Absolute path of the output file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="n">media_file</span><span class="p">,</span> <span class="n">select_streams</span><span class="o">=</span><span class="s2">&quot;v&quot;</span><span class="p">)[</span><span class="s1">&#39;streams&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;codec_type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;video&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;File </span><span class="si">{</span><span class="n">media_file</span><span class="si">}</span><span class="s1"> is not a video&#39;</span>


    <span class="n">srtin_files</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">subs</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">in_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output_filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out_file</span> <span class="o">=</span> <span class="n">in_file</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_filename</span><span class="si">}{</span><span class="n">in_file</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_file</span> <span class="o">=</span> <span class="n">in_file</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">in_file</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s2">-subs-merged</span><span class="si">{</span><span class="n">in_file</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">video</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">in_file</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
        <span class="n">metadata_subs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;scodec&#39;</span><span class="p">:</span> <span class="s1">&#39;mov_text&#39;</span><span class="p">}</span> <span class="k">if</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;codec_name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;h264&#39;</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="n">ffmpeg_subs_inputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">lang</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">srtin_files</span><span class="p">):</span>
            <span class="n">srtin</span> <span class="o">=</span> <span class="n">srtin_files</span><span class="p">[</span><span class="n">lang</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.srt&#39;</span>
            <span class="n">subs</span><span class="p">[</span><span class="n">lang</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">srtin</span><span class="p">)</span>
            <span class="n">ffmpeg_subs_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ffmpeg</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">srtin</span><span class="p">)[</span><span class="s1">&#39;s&#39;</span><span class="p">])</span>
            <span class="n">metadata_subs</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;metadata:s:s:</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;title=&quot;</span> <span class="o">+</span> <span class="n">lang</span>

        <span class="n">output_file</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">out_file</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
        <span class="n">input_ffmpeg</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
        <span class="n">input_video</span> <span class="o">=</span> <span class="n">input_ffmpeg</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span>
        <span class="n">input_audio</span> <span class="o">=</span> <span class="n">input_ffmpeg</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
        <span class="n">output_ffmpeg</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">output</span><span class="p">(</span>
            <span class="n">input_video</span><span class="p">,</span> <span class="n">input_audio</span><span class="p">,</span> <span class="o">*</span><span class="n">ffmpeg_subs_inputs</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span>
            <span class="n">vcodec</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="n">acodec</span><span class="o">=</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span>
            <span class="c1"># scodec=&#39;mov_text&#39;,</span>
            <span class="o">**</span><span class="n">metadata_subs</span>
        <span class="p">)</span>
        <span class="n">output_ffmpeg</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">overwrite_output</span><span class="p">(</span><span class="n">output_ffmpeg</span><span class="p">)</span>
        <span class="n">ffmpeg</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">output_ffmpeg</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">srtin_file</span> <span class="ow">in</span> <span class="n">srtin_files</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">srtin_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">srtin_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">out_file</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="subsai.models" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">subsai.models</span>


</h2>

    <div class="doc doc-contents first">








  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h3 id="subsai.models.abstract_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">abstract_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>API that the transcription models should follow</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="subsai.models.abstract_model.AbstractModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AbstractModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">AbstractModel</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model_config</span><span class="o">=</span><span class="p">{})</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract Model class</p>






                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/abstract_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model_config</span><span class="o">=</span><span class="p">{}):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_config</span> <span class="o">=</span> <span class="n">model_config</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.abstract_model.AbstractModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.abstract_model.AbstractModel.model_config" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_config</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_config</span> <span class="o">=</span> <span class="n">model_config</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.abstract_model.AbstractModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Transcribe the <code>media_file</code> to subtitles.</p>
<p>example use case from pysubs2.whisper:</p>
<p>.. code-block:: python
    :linenos:</p>
<p>subs = SSAFile()
for segment in segments:
    event = SSAEvent(start=make_time(s=segment["start"]), end=make_time(s=segment["end"]))
    event.plaintext = segment["text"].strip()
    subs.append(event)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>media_file</code></b>
          –
          <div class="doc-md-description">
            <p>Path of the media file</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="pysubs2.SSAFile">SSAFile</span></code>
          –
          <div class="doc-md-description">
            <p>Collection of SSAEvent(s) (see :mod:<code>pysubs2.ssaevent</code>)</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/abstract_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SSAFile</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transcribe the `media_file` to subtitles.</span>

<span class="sd">    example use case from pysubs2.whisper:</span>

<span class="sd">    .. code-block:: python</span>
<span class="sd">        :linenos:</span>

<span class="sd">    subs = SSAFile()</span>
<span class="sd">    for segment in segments:</span>
<span class="sd">        event = SSAEvent(start=make_time(s=segment[&quot;start&quot;]), end=make_time(s=segment[&quot;end&quot;]))</span>
<span class="sd">        event.plaintext = segment[&quot;text&quot;].strip()</span>
<span class="sd">        subs.append(event)</span>

<span class="sd">    :param media_file: Path of the media file</span>
<span class="sd">    :return: Collection of SSAEvent(s) (see :mod:`pysubs2.ssaevent`)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.faster_whisper_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">faster_whisper_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>Faster Whisper Model</p>
<p>See <a href="https://github.com/guillaumekln/faster-whisper">guillaumekln/faster-whisper</a></p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="subsai.models.faster_whisper_model.FasterWhisperModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">FasterWhisperModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">FasterWhisperModel</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/faster_whisper_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">FasterWhisperModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="n">model_config</span><span class="p">,</span>
                                       <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_size_or_path</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_size_or_path&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_device_index</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;device_index&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_compute_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;compute_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cpu_threads</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;cpu_threads&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_num_workers</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;num_workers&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">transcribe_configs</span> <span class="o">=</span> \
        <span class="p">{</span><span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">WhisperModel</span><span class="p">(</span><span class="n">model_size_or_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_size_or_path</span><span class="p">,</span>
                              <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">,</span>
                              <span class="n">device_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_index</span><span class="p">,</span>
                              <span class="n">compute_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_compute_type</span><span class="p">,</span>
                              <span class="n">cpu_threads</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cpu_threads</span><span class="p">,</span>
                              <span class="n">num_workers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_workers</span><span class="p">)</span>


    <span class="c1"># to show the progress</span>
    <span class="kn">import</span> <span class="nn">logging</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;faster_whisper&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.faster_whisper_model.FasterWhisperModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;guillaumekln/faster-whisper&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.faster_whisper_model.FasterWhisperModel.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_size_or_path&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;Size of the model to use (e.g. &quot;large-v2&quot;, &quot;small&quot;, &quot;tiny.en&quot;, etc.)or a path to a converted model directory. When a size is configured, the convertedmodel is downloaded from the Hugging Face Hub.&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">available_models</span><span class="p">(),</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;Device to use for computation (&quot;cpu&quot;, &quot;cuda&quot;, &quot;auto&quot;)&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="s2">&quot;cpu&quot;</span><span class="p">,</span> <span class="s2">&quot;cuda&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;device_index&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Device ID to use.The model can also be loaded on multiple GPUs by passing a list of IDs(e.g. [0, 1, 2, 3]). In that case, multiple transcriptions can run in parallelwhen transcribe() is called from multiple Python threads (see also num_workers).&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;compute_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Type to use for computation.See https://opennmt.net/CTranslate2/quantization.html.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;cpu_threads&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Number of threads to use when running on CPU (4 by default).A non zero value overrides the OMP_NUM_THREADS environment variable.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;num_workers&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;When transcribe() is called from multiple Python threads,having multiple workers enables true parallelism when running the model(concurrent calls to self.model.generate() will run in parallel).This can improve the global throughput at the cost of increased memory usage.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature for sampling. It can be a tuple of temperatures, which will be successively used upon failures according to either `compression_ratio_threshold` or `logprob_threshold`.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;compression_ratio_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the gzip compression ratio is above this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">2.4</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;log_prob_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the average log probability over sampled tokens is below this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;no_speech_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the no_speech probability is higher than this value AND the average log probability over sampled tokens is below `logprob_threshold`, consider the segment as silent&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;condition_on_previous_text&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;if True, the previous output of the model is provided as a prompt for the next window; disabling may make the text inconsistent across windows, but the model becomes less prone to getting stuck in a failure loop, such as repetition looping or timestamps going out of sync.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;whether to perform X-&gt;X &#39;transcribe&#39; or X-&gt;English &#39;translate&#39;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;transcribe&quot;</span><span class="p">,</span> <span class="s2">&quot;translate&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;language that the audio is in; uses detected language if None&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;best_of&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of independent samples to collect, when t &gt; 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;beam_size&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of beams in beam search, when t == 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;patience&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;patience in beam search (https://arxiv.org/abs/2204.05424)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;length_penalty&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;alpha&#39; in Google NMT, None defaults to length norm&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prefix&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;text or tokens to prefix the current context&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_blank&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;this will suppress blank outputs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;list of tokens ids (or comma-separated token ids) to suppress &quot;-1&quot; will suppress a set of symbols as defined in `tokenizer.non_speech_tokens()`&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;without_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;use &lt;|notimestamps|&gt; to sample text tokens only&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_initial_timestamp&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the initial timestamp cannot be later than this&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;initial_prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Optional text to provide as a prompt for the first window.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;word_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Extract word-level timestamps using the cross-attention patternand dynamic time warping, and include the timestamps for each word in each segment.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prepend_punctuations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If word_timestamps is True, merge these punctuation symbolswith the next word&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;“¿([{-&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;append_punctuations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If word_timestamps is True, merge these punctuation symbolswith the previous word&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;.。,，!！?？:：”)]}、&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;vad_filter&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If True, use the integrated Silero VAD model to filter out parts of the audio without speech.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;vad_parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Parameters for splitting long audios into speech chunks using silero VAD.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;threshold&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s2">&quot;min_speech_duration_ms&quot;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>
            <span class="s2">&quot;max_speech_duration_s&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">),</span>
            <span class="s2">&quot;min_silence_duration_ms&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="s2">&quot;window_size_samples&quot;</span><span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
            <span class="s2">&quot;speech_pad_ms&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.faster_whisper_model.FasterWhisperModel.transcribe_configs" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">transcribe_configs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">transcribe_configs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span>
        <span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">config_schema</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.faster_whisper_model.FasterWhisperModel.model" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">WhisperModel</span><span class="p">(</span>
    <span class="n">model_size_or_path</span><span class="o">=</span><span class="n">_model_size_or_path</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">_device</span><span class="p">,</span>
    <span class="n">device_index</span><span class="o">=</span><span class="n">_device_index</span><span class="p">,</span>
    <span class="n">compute_type</span><span class="o">=</span><span class="n">_compute_type</span><span class="p">,</span>
    <span class="n">cpu_threads</span><span class="o">=</span><span class="n">_cpu_threads</span><span class="p">,</span>
    <span class="n">num_workers</span><span class="o">=</span><span class="n">_num_workers</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.faster_whisper_model.FasterWhisperModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/faster_whisper_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">segments</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">transcribe_configs</span><span class="p">)</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="p">()</span>
    <span class="n">total_duration</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># Same precision as the Whisper timestamps.</span>
    <span class="n">timestamps</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># to get the current segments</span>
    <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">total_duration</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot; audio seconds&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pbar</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transcribe_configs</span><span class="p">[</span><span class="s1">&#39;word_timestamps&#39;</span><span class="p">]:</span>  <span class="c1"># word level timestamps</span>
            <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">timestamps</span><span class="p">)</span>
                <span class="n">timestamps</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span>
                <span class="k">if</span> <span class="n">timestamps</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">.</span><span class="n">duration</span><span class="p">:</span>
                    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">duration</span> <span class="o">-</span> <span class="n">timestamps</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">segment</span><span class="o">.</span><span class="n">words</span><span class="p">:</span>
                    <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">word</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
                <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">timestamps</span><span class="p">)</span>
                <span class="n">timestamps</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">end</span>
                <span class="k">if</span> <span class="n">timestamps</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">.</span><span class="n">duration</span><span class="p">:</span>
                    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">duration</span> <span class="o">-</span> <span class="n">timestamps</span><span class="p">)</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
                <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.hugging_face_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">hugging_face_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>Hugging Face Model</p>
<p>See <a href="https://huggingface.co/tasks/automatic-speech-recognition">automatic-speech-recognition</a></p>








  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="subsai.models.hugging_face_model.devices" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">devices</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">devices</span> <span class="o">=</span> <span class="n">get_available_devices</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>


<div class="doc doc-object doc-class">



<h4 id="subsai.models.hugging_face_model.HuggingFaceModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">HuggingFaceModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">HuggingFaceModel</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/hugging_face_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">HuggingFaceModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="n">model_config</span><span class="p">,</span>
                                           <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;segment_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_chunk_length_s</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;chunk_length_s&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>


    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span>
        <span class="s2">&quot;automatic-speech-recognition&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span><span class="p">,</span>
        <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.hugging_face_model.HuggingFaceModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;HuggingFaceModel&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.hugging_face_model.HuggingFaceModel.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_id&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The model id from the Hugging Face Hub.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;openai/whisper-tiny&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Pytorch device&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">devices</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">devices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;segment_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Sentence-level or word-level timestamps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sentence&quot;</span><span class="p">,</span> <span class="s2">&quot;word&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;sentence&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;chunk_length_s&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;(`float`, *optional*, defaults to 0):The input length for in each chunk. If `chunk_length_s = 0` then chunking is disabled (default).&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.hugging_face_model.HuggingFaceModel.segment_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">segment_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">segment_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;segment_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.hugging_face_model.HuggingFaceModel.model" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span>
    <span class="s2">&quot;automatic-speech-recognition&quot;</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="n">_model_id</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">_device</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.hugging_face_model.HuggingFaceModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/hugging_face_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">(</span>
        <span class="n">media_file</span><span class="p">,</span>
        <span class="n">chunk_length_s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_chunk_length_s</span><span class="p">,</span>
        <span class="n">return_timestamps</span><span class="o">=</span><span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">==</span> <span class="s1">&#39;sentence&#39;</span> <span class="k">else</span> <span class="s1">&#39;word&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s1">&#39;chunks&#39;</span><span class="p">]:</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">chunk</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
                         <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">chunk</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>
        <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.stable_ts_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">stable_ts_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>Stable-ts Model</p>
<p>See <a href="https://github.com/jianfch/stable-ts">jianfch/stable-ts</a></p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="subsai.models.stable_ts_model.StableTsModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">StableTsModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">StableTsModel</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/stable_ts_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">StableTsModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="n">model_config</span><span class="p">,</span>
                                        <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_in_memory</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;in_memory&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cpu_preload</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;cpu_preload&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_dq</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;dq&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_temperature</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_compression_ratio_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;compression_ratio_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logprob_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;logprob_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_no_speech_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;no_speech_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_condition_on_previous_text</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;condition_on_previous_text&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initial_prompt</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;initial_prompt&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_word_timestamps</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;word_timestamps&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_regroup</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;regroup&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ts_num</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;ts_num&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ts_noise</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;ts_noise&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_suppress_silence</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;suppress_silence&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_suppress_word_ts</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;suppress_word_ts&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_q_levels</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;q_levels&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_k_size</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;k_size&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_time_scale</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;time_scale&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_demucs</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;demucs&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_demucs_output</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;demucs_output&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_demucs_options</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;demucs_options&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vad</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;vad&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vad_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;vad_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vad_onnx</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;vad_onnx&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_min_word_dur</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;min_word_dur&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_only_voice_freq</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;only_voice_freq&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_prepend_punctuations</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;prepend_punctuations&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_append_punctuations</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;append_punctuations&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_mel_first</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;mel_first&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_suppress_ts_tokens</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;suppress_ts_tokens&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_gap_padding</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;gap_padding&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_only_ffmpeg</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;only_ffmpeg&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_max_instant_words</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;max_instant_words&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_avg_prob_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;avg_prob_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_compatibility</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;ignore_compatibility&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">transcribe_configs</span> <span class="o">=</span> \
        <span class="p">{</span><span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_type</span><span class="p">,</span>
                            <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device</span><span class="p">,</span>
                            <span class="n">in_memory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_in_memory</span><span class="p">,</span>
                            <span class="n">cpu_preload</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cpu_preload</span><span class="p">,</span>
                            <span class="n">dq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dq</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.stable_ts_model.StableTsModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;jianfch/stable-ts&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.stable_ts_model.StableTsModel.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;One of the official model names listed by `whisper.available_models()`, or path to a model checkpoint containing the model dimensions and the model state_dict.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">available_models</span><span class="p">(),</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The PyTorch device to put the model into&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">get_available_devices</span><span class="p">()],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;in_memory&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;bool, default False, Whether to preload the model weights into host memory.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;cpu_preload&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Load model into CPU memory first then move model to specified device to reduce GPU memory usage when loading model&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;dq&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to apply Dynamic Quantization to model to reduced memory usage and increase inference speed but at the cost of a slight decrease in accuracy. Only for CPU.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to display the text being decoded to the console. If True, displays all the details,If False, displays minimal details. If None, does not display anything&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature for sampling. It can be a tuple of temperatures, which will be successively used upon failures according to either `compression_ratio_threshold` or `logprob_threshold`.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="p">},</span>
    <span class="s2">&quot;compression_ratio_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the gzip compression ratio is above this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">2.4</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;logprob_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the average log probability over sampled tokens is below this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;no_speech_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the no_speech probability is higher than this value AND the average log probability over sampled tokens is below `logprob_threshold`, consider the segment as silent&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;condition_on_previous_text&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;if True, the previous output of the model is provided as a prompt for the next window; disabling may make the text inconsistent across windows, but the model becomes less prone to getting stuck in a failure loop, such as repetition looping or timestamps going out of sync.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;initial_prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Optional text to provide as a prompt for the first window.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;word_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Extract word-level timestamps using the cross-attention patternand dynamic time warping, and include the timestamps for each word in each segment.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;regroup&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;default True, meaning the default regroup algorithmString for customizing the regrouping algorithm. False disables regrouping.Ignored if ``word_timestamps = False``.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;ts_num&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;meaning disable this optionNumber of extra timestamp inferences to perform then use average of these extra timestamps.An experimental option that might hurt performance.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;ts_noise&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Percentage of noise to add to audio_features to perform inferences for ``ts_num``.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_silence&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to enable timestamps adjustments based on the detected silence.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_word_ts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to adjust word timestamps based on the detected silence. Only enabled if ``suppress_silence = True``.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;q_levels&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Quantization levels for generating timestamp suppression mask; ignored if ``vad = true``.Acts as a threshold to marking sound as silent.Fewer levels will increase the threshold of volume at which to mark a sound as silent.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;k_size&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Kernel size for avg-pooling waveform to generate timestamp suppression mask; ignored if ``vad = true``.Recommend 5 or 3; higher sizes will reduce detection of silence.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;time_scale&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Factor for scaling audio duration for inference.Greater than 1.0 &#39;slows down&#39; the audio, and less than 1.0 &#39;speeds up&#39; the audio. None is same as 1.0.A factor of 1.5 will stretch 10s audio to 15s for inference. This increases the effective resolutionof the model but can increase word error rate.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;demucs&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to preprocess ``audio`` with Demucs to isolate vocals / remove noise. Set ``demucs`` to an instance ofa Demucs model to avoid reloading the model for each run.Demucs must be installed to use. Official repo. https://github.com/facebookresearch/demucs.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;demucs_output&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Path to save the vocals isolated by Demucs as WAV file. Ignored if ``demucs = False``.Demucs must be installed to use. Official repo. https://github.com/facebookresearch/demucs.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;demucs_options&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Options to use for :func:`stable_whisper.audio.demucs_audio`.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;vad&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to use Silero VAD to generate timestamp suppression mask.Silero VAD requires PyTorch 1.12.0+. Official repo, https://github.com/snakers4/silero-vad.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;vad_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Threshold for detecting speech with Silero VAD. Low threshold reduces false positives for silence detection.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.35</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;vad_onnx&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to use ONNX for Silero VAD.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;min_word_dur&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Shortest duration each word is allowed to reach for silence suppression.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;only_voice_freq&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to only use sound between 200 - 5000 Hz, where majority of human speech are.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prepend_punctuations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If word_timestamps is True, merge these punctuation symbolswith the next word&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;“¿([{-&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;append_punctuations&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If word_timestamps is True, merge these punctuation symbolswith the previous word&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;.。,，!！?？:：”)]}、&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;mel_first&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Process entire audio track into log-Mel spectrogram first instead in chunks.Used if odd behavior seen in stable-ts but not in whisper, but use significantly more memory for long audio.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_ts_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot; Whether to suppress timestamp tokens during inference for timestamps are detected at silent.Reduces hallucinations in some cases, but also prone to ignore disfluencies and repetitions.This option is ignored if ``suppress_silence = False``.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;gap_padding&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Padding prepend to each segments for word timing alignment.Used to reduce the probability of model predicting timestamps earlier than the first utterance.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;only_ffmpeg&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to use only FFmpeg (instead of not yt-dlp) for URls&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_instant_words&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If percentage of instantaneous words in a segment exceed this amount, the segment is removed.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;avg_prob_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Transcribe the gap after the previous word and if the average word proababiliy of a segment falls below thisvalue, discard the segment. If ``None``, skip transcribing the gap to reduce chance of timestamps startingbefore the next utterance.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;ignore_compatibility&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to ignore warnings for compatibility issues with the detected Whisper version.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;whether to perform X-&gt;X &#39;transcribe&#39; or X-&gt;English &#39;translate&#39;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;transcribe&quot;</span><span class="p">,</span> <span class="s2">&quot;translate&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;language that the audio is in; uses detected language if None&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;sample_len&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;maximum number of tokens to sample&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;best_of&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of independent samples to collect, when t &gt; 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;beam_size&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of beams in beam search, when t == 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;patience&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;patience in beam search (https://arxiv.org/abs/2204.05424)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;length_penalty&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;alpha&#39; in Google NMT, None defaults to length norm&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;text or tokens for the previous context&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prefix&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;text or tokens to prefix the current context&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_blank&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;this will suppress blank outputs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;list of tokens ids (or comma-separated token ids) to suppress &quot;-1&quot; will suppress a set of symbols as defined in `tokenizer.non_speech_tokens()`&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;-1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;without_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;use &lt;|notimestamps|&gt; to sample text tokens only&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_initial_timestamp&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the initial timestamp cannot be later than this&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;fp16&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;use fp16 for most of the calculation&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.stable_ts_model.StableTsModel.transcribe_configs" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">transcribe_configs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">transcribe_configs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span>
        <span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">config_schema</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_</span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.stable_ts_model.StableTsModel.model" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">_model_type</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">_device</span><span class="p">,</span>
    <span class="n">in_memory</span><span class="o">=</span><span class="n">_in_memory</span><span class="p">,</span>
    <span class="n">cpu_preload</span><span class="o">=</span><span class="n">_cpu_preload</span><span class="p">,</span>
    <span class="n">dq</span><span class="o">=</span><span class="n">_dq</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.stable_ts_model.StableTsModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/stable_ts_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SSAFile</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">transcribe_stable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
                               <span class="n">audio</span><span class="o">=</span><span class="n">media_file</span><span class="p">,</span>
                               <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_verbose</span><span class="p">,</span>
                               <span class="n">temperature</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_temperature</span><span class="p">,</span>
                               <span class="n">compression_ratio_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_compression_ratio_threshold</span><span class="p">,</span>
                               <span class="n">logprob_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_logprob_threshold</span><span class="p">,</span>
                               <span class="n">no_speech_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_no_speech_threshold</span><span class="p">,</span>
                               <span class="n">condition_on_previous_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_condition_on_previous_text</span><span class="p">,</span>
                               <span class="n">initial_prompt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_initial_prompt</span><span class="p">,</span>
                               <span class="n">word_timestamps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_word_timestamps</span><span class="p">,</span>
                               <span class="n">regroup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_regroup</span><span class="p">,</span>
                               <span class="n">ts_num</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ts_num</span><span class="p">,</span>
                               <span class="n">ts_noise</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ts_noise</span><span class="p">,</span>
                               <span class="n">suppress_silence</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_suppress_silence</span><span class="p">,</span>
                               <span class="n">suppress_word_ts</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_suppress_word_ts</span><span class="p">,</span>
                               <span class="n">q_levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_q_levels</span><span class="p">,</span>
                               <span class="n">k_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_k_size</span><span class="p">,</span>
                               <span class="n">time_scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_time_scale</span><span class="p">,</span>
                               <span class="n">demucs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_demucs</span><span class="p">,</span>
                               <span class="n">demucs_output</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_demucs_output</span><span class="p">,</span>
                               <span class="n">demucs_options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_demucs_options</span><span class="p">,</span>
                               <span class="n">vad</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_vad</span><span class="p">,</span>
                               <span class="n">vad_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_vad_threshold</span><span class="p">,</span>
                               <span class="n">vad_onnx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_vad_onnx</span><span class="p">,</span>
                               <span class="n">min_word_dur</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_word_dur</span><span class="p">,</span>
                               <span class="n">only_voice_freq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_only_voice_freq</span><span class="p">,</span>
                               <span class="n">prepend_punctuations</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_prepend_punctuations</span><span class="p">,</span>
                               <span class="n">append_punctuations</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_append_punctuations</span><span class="p">,</span>
                               <span class="n">mel_first</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_mel_first</span><span class="p">,</span>
                               <span class="n">suppress_ts_tokens</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_suppress_ts_tokens</span><span class="p">,</span>
                               <span class="n">gap_padding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_gap_padding</span><span class="p">,</span>
                               <span class="n">only_ffmpeg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_only_ffmpeg</span><span class="p">,</span>
                               <span class="n">max_instant_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_instant_words</span><span class="p">,</span>
                               <span class="n">avg_prob_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_avg_prob_threshold</span><span class="p">,</span>
                               <span class="n">ignore_compatibility</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ignore_compatibility</span><span class="p">,</span>
                               <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">transcribe_configs</span><span class="p">,</span>
                               <span class="p">)</span>

    <span class="n">subs</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_word_timestamps</span><span class="p">:</span>  <span class="c1"># word level timestamps</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">segment</span><span class="o">.</span><span class="n">words</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">word</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Something wrong with </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
            <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>


    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.whisperX_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">whisperX_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>WhisperX Model</p>
<p>See <a href="https://github.com/m-bain/whisperX">m-bain/whisperX</a></p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="subsai.models.whisperX_model.WhisperXModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">WhisperXModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">WhisperXModel</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/whisperX_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WhisperXModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="n">model_config</span><span class="p">,</span>
                                        <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">compute_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;compute_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">download_root</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;download_root&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;language&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;segment_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="c1"># transcribe config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;batch_size&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">return_char_alignments</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;return_char_alignments&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">speaker_labels</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;speaker_labels&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">HF_TOKEN</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;HF_TOKEN&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">min_speakers</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;min_speakers&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_speakers</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;max_speakers&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">whisperx</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_type</span><span class="p">,</span>
                                     <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
                                     <span class="n">compute_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_type</span><span class="p">,</span>
                                     <span class="n">download_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">download_root</span><span class="p">,</span>
                                     <span class="n">language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;m-bain/whisperX&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;One of the official model names listed by `whisper.available_models()`, or path to a model checkpoint containing the model dimensions and the model state_dict.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">available_models</span><span class="p">(),</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;Device to use for computation (&quot;cpu&quot;, &quot;cuda&quot;)&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span> <span class="s2">&quot;cuda&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;compute_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;change to &#39;int8&#39; if low on GPU mem (may reduce accuracy)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;float16&quot;</span><span class="p">,</span> <span class="s2">&quot;int8&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;download_root&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Path to download the model files; by default, it uses &#39;~/.cache/whisper&#39;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;language that the audio is in; uses detected language if None&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;segment_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Word-level timestamps, Choose here between sentence-level and word-level&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sentence&quot;</span><span class="p">,</span> <span class="s2">&quot;word&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;sentence&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;reduce if low on GPU mem&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;return_char_alignments&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to return char alignments&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;speaker_labels&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Run Diarization Pipeline&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;HF_TOKEN&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;if speaker labels is True, you will need Hugging Face access token to use the diarization models, https://github.com/m-bain/whisperX#speaker-diarization&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;min_speakers&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;min speakers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_speakers&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;max speakers&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.model_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.device" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">device</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s2">&quot;device&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.compute_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">compute_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">compute_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;compute_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.download_root" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">download_root</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">download_root</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;download_root&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.language" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">language</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">language</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.segment_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">segment_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">segment_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;segment_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.batch_size" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">batch_size</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">batch_size</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;batch_size&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.return_char_alignments" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">return_char_alignments</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">return_char_alignments</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;return_char_alignments&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.speaker_labels" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">speaker_labels</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">speaker_labels</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;speaker_labels&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.HF_TOKEN" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">HF_TOKEN</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">HF_TOKEN</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;HF_TOKEN&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.min_speakers" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">min_speakers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">min_speakers</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;min_speakers&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.max_speakers" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">max_speakers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">max_speakers</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;max_speakers&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisperX_model.WhisperXModel.model" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span>
    <span class="n">model_type</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span>
    <span class="n">compute_type</span><span class="o">=</span><span class="n">compute_type</span><span class="p">,</span>
    <span class="n">download_root</span><span class="o">=</span><span class="n">download_root</span><span class="p">,</span>
    <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.whisperX_model.WhisperXModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whisperX_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">audio</span> <span class="o">=</span> <span class="n">whisperx</span><span class="o">.</span><span class="n">load_audio</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">batch_size</span><span class="p">)</span>
    <span class="n">model_a</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">whisperx</span><span class="o">.</span><span class="n">load_align_model</span><span class="p">(</span><span class="n">language_code</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">whisperx</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&quot;segments&quot;</span><span class="p">],</span> <span class="n">model_a</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">audio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
                            <span class="n">return_char_alignments</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">return_char_alignments</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clear_gpu</span><span class="p">()</span>
    <span class="k">del</span> <span class="n">model_a</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">speaker_labels</span><span class="p">:</span>
        <span class="n">diarize_model</span> <span class="o">=</span> <span class="n">whisperx</span><span class="o">.</span><span class="n">DiarizationPipeline</span><span class="p">(</span><span class="n">use_auth_token</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">HF_TOKEN</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
        <span class="n">diarize_segments</span> <span class="o">=</span> <span class="n">diarize_model</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">min_speakers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_speakers</span><span class="p">,</span> <span class="n">max_speakers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_speakers</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">whisperx</span><span class="o">.</span><span class="n">assign_word_speakers</span><span class="p">(</span><span class="n">diarize_segments</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clear_gpu</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">diarize_model</span>

    <span class="n">subs</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">==</span> <span class="s1">&#39;word&#39;</span><span class="p">:</span>  <span class="c1"># word level timestamps</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">segment</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]),</span>
                                     <span class="n">name</span><span class="o">=</span><span class="n">segment</span><span class="p">[</span><span class="s2">&quot;speaker&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">speaker_labels</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">segment</span><span class="p">[</span><span class="s2">&quot;speaker&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="n">word</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">speaker_labels</span> <span class="k">else</span> <span class="n">word</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Something wrong with </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">==</span> <span class="s1">&#39;sentence&#39;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]),</span>
                             <span class="n">name</span><span class="o">=</span><span class="n">segment</span><span class="p">[</span><span class="s2">&quot;speaker&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">speaker_labels</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">segment</span><span class="p">[</span><span class="s2">&quot;speaker&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span><span class="o">+</span> <span class="n">segment</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">speaker_labels</span> <span class="k">else</span> <span class="n">segment</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown `segment_type` value, it should be one of the following: &#39;</span>
                        <span class="sa">f</span><span class="s1">&#39; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">[</span><span class="s2">&quot;segment_type&quot;</span><span class="p">][</span><span class="s2">&quot;options&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.whisper_api_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">whisper_api_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>Whisper API Model</p>
<p>See <a href="https://platform.openai.com/docs/guides/speech-to-text">openai/whisper</a></p>








  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="subsai.models.whisper_api_model.TMPDIR" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TMPDIR</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">TMPDIR</span> <span class="o">=</span> <span class="n">gettempdir</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="subsai.models.whisper_api_model.OPENAI_API_SIZE_LIMIT_MB" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">OPENAI_API_SIZE_LIMIT_MB</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">OPENAI_API_SIZE_LIMIT_MB</span> <span class="o">=</span> <span class="mi">24</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>


<div class="doc doc-object doc-class">



<h4 id="subsai.models.whisper_api_model.WhisperAPIModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">WhisperAPIModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">WhisperAPIModel</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/whisper_api_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="p">):</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;api_key&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;language&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;prompt&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;openai/whisper&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;OpenAI Whisper API, currently only supports large-v2 which is named as whisper-1/                                 There is a 25mb upload limit so audio is chunked locally, this may lead to lower performance.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;whisper-1&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;whisper-1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Your OpenAI API key&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENAI_KEY&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="p">},</span>
    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The language of the input audio. Supplying the input language in ISO-639-1 format will improve accuracy and latency.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;An optional text to guide the model&#39;s style or continue a previous audio segment. The prompt should match the audio language.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The sampling temperature, between 0 and 1. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic. If set to 0, the model will use log probability to automatically increase the temperature until certain thresholds are hit.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.model_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.api_key" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">api_key</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">api_key</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;api_key&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.language" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">language</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">language</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.prompt" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">prompt</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">prompt</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s2">&quot;prompt&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.temperature" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">temperature</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">temperature</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.client" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">client</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">api_key</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.chunk_audio" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">chunk_audio</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">chunk_audio</span><span class="p">(</span><span class="n">audio_file_path</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whisper_api_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">chunk_audio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">audio_file_path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="c1"># Load the audio file</span>
    <span class="n">audio</span> <span class="o">=</span> <span class="n">AudioSegment</span><span class="o">.</span><span class="n">from_mp3</span><span class="p">(</span><span class="n">audio_file_path</span><span class="p">)</span>

    <span class="c1"># Desired chunk size in megabytes (MB)</span>
    <span class="n">chunk_size_bits</span> <span class="o">=</span> <span class="n">OPENAI_API_SIZE_LIMIT_MB</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">8</span>
    <span class="n">bitrate</span> <span class="o">=</span> <span class="n">audio</span><span class="o">.</span><span class="n">frame_rate</span> <span class="o">*</span> <span class="n">audio</span><span class="o">.</span><span class="n">frame_width</span>
    <span class="n">chunk_duration_ms</span> <span class="o">=</span> <span class="p">((</span><span class="n">chunk_size_bits</span><span class="p">)</span> <span class="o">/</span> <span class="n">bitrate</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>

    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Split the audio into chunks</span>
    <span class="n">current_ms</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">current_ms</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">audio</span><span class="p">):</span>
        <span class="c1"># Calculate the end of the current chunk</span>
        <span class="n">end_ms</span> <span class="o">=</span> <span class="n">current_ms</span> <span class="o">+</span> <span class="n">chunk_duration_ms</span>
        <span class="c1"># Create a chunk from the current position to the end position</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="n">audio</span><span class="p">[</span><span class="n">current_ms</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">end_ms</span><span class="p">)]</span>
        <span class="c1"># Add the chunk to the list of chunks and include offset</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">chunk</span><span class="p">,</span><span class="n">current_ms</span><span class="p">))</span>
        <span class="c1"># Update the current position</span>
        <span class="n">current_ms</span> <span class="o">=</span> <span class="n">end_ms</span>

    <span class="k">return</span> <span class="n">chunks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="subsai.models.whisper_api_model.WhisperAPIModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whisper_api_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

    <span class="n">audio_file_path</span> <span class="o">=</span> <span class="n">convert_video_to_audio_ffmpeg</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>

    <span class="n">chunks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunk_audio</span><span class="p">(</span><span class="n">audio_file_path</span><span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">chunk</span><span class="p">,</span><span class="n">offset</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chunks</span><span class="p">):</span>
        <span class="n">chunk_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">TMPDIR</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;chunk_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">.mp3&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Transcribing audio chunk </span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">chunks</span><span class="p">)))</span>
        <span class="n">chunk</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">chunk_path</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;mp3&#39;</span><span class="p">)</span>
        <span class="n">audio_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">chunk_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span>

        <span class="c1"># Use OpenAI Whisper API</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">audio</span><span class="o">.</span><span class="n">transcriptions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_type</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">,</span>
            <span class="n">prompt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">prompt</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
            <span class="n">file</span><span class="o">=</span><span class="n">audio_file</span><span class="p">,</span>
            <span class="n">response_format</span><span class="o">=</span><span class="s2">&quot;srt&quot;</span>
        <span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">chunk_path</span><span class="o">+</span><span class="s1">&#39;.srt&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="c1"># shift subtitles by offset</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">ms</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">+=</span> <span class="n">result</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="s1">&#39;srt&#39;</span><span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">SSAFile</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h4 id="subsai.models.whisper_api_model.split_filename" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">split_filename</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">split_filename</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whisper_api_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">split_filename</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
    <span class="n">path</span><span class="p">,</span> <span class="n">full_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">full_filename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">path</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span><span class="n">ext</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="subsai.models.whisper_api_model.convert_video_to_audio_ffmpeg" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">convert_video_to_audio_ffmpeg</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">convert_video_to_audio_ffmpeg</span><span class="p">(</span><span class="n">video_file</span><span class="p">,</span> <span class="n">output_ext</span><span class="o">=</span><span class="s1">&#39;mp3&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whisper_api_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_video_to_audio_ffmpeg</span><span class="p">(</span><span class="n">video_file</span><span class="p">,</span> <span class="n">output_ext</span><span class="o">=</span><span class="s2">&quot;mp3&quot;</span><span class="p">):</span>
    <span class="c1"># Construct the output file name</span>
    <span class="n">path</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span><span class="n">ext</span> <span class="o">=</span> <span class="n">split_filename</span><span class="p">(</span><span class="n">video_file</span><span class="p">)</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">TMPDIR</span><span class="p">,</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">output_ext</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saving audio to </span><span class="si">{}</span><span class="s1"> with ffmpeg...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">output_file</span><span class="p">))</span>
    <span class="c1"># Execute the ffmpeg conversion</span>
    <span class="p">(</span>
        <span class="n">ffmpeg</span>
        <span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">video_file</span><span class="p">)</span>
        <span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
        <span class="o">.</span><span class="n">overwrite_output</span><span class="p">()</span>
        <span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">output_file</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.whisper_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">whisper_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>Whisper Model</p>
<p>See <a href="https://github.com/openai/whisper">openai/whisper</a></p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="subsai.models.whisper_model.WhisperModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">WhisperModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">WhisperModel</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/whisper_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WhisperModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="n">model_config</span><span class="p">,</span>
                                       <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">download_root</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;download_root&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">in_memory</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;in_memory&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">compression_ratio_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;compression_ratio_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logprob_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;logprob_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">no_speech_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;no_speech_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">condition_on_previous_text</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;condition_on_previous_text&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">decode_options</span> <span class="o">=</span> \
        <span class="p">{</span><span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">)}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">whisper</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_type</span><span class="p">,</span>
                                    <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
                                    <span class="n">download_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">download_root</span><span class="p">,</span>
                                    <span class="n">in_memory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">in_memory</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;openai/whisper&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;One of the official model names listed by `whisper.available_models()`, or path to a model checkpoint containing the model dimensions and the model state_dict.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">available_models</span><span class="p">(),</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The PyTorch device to put the model into&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">get_available_devices</span><span class="p">()],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;download_root&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Path to download the model files; by default, it uses &#39;~/.cache/whisper&#39;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;in_memory&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;whether to preload the model weights into host memory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to display the text being decoded to the console. If True, displays all the details,If False, displays minimal details. If None, does not display anything&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature for sampling. It can be a tuple of temperatures, which will be successively used upon failures according to either `compression_ratio_threshold` or `logprob_threshold`.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="p">},</span>
    <span class="s2">&quot;compression_ratio_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the gzip compression ratio is above this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">2.4</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;logprob_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the average log probability over sampled tokens is below this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;no_speech_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the no_speech probability is higher than this value AND the average log probability over sampled tokens is below `logprob_threshold`, consider the segment as silent&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;condition_on_previous_text&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;if True, the previous output of the model is provided as a prompt for the next window; disabling may make the text inconsistent across windows, but the model becomes less prone to getting stuck in a failure loop, such as repetition looping or timestamps going out of sync.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;whether to perform X-&gt;X &#39;transcribe&#39; or X-&gt;English &#39;translate&#39;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;transcribe&quot;</span><span class="p">,</span> <span class="s2">&quot;translate&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;language that the audio is in; uses detected language if None&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;sample_len&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;maximum number of tokens to sample&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;best_of&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of independent samples to collect, when t &gt; 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;beam_size&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of beams in beam search, when t == 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;patience&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;patience in beam search (https://arxiv.org/abs/2204.05424)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;length_penalty&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;alpha&#39; in Google NMT, None defaults to length norm&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;text or tokens for the previous context&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prefix&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;text or tokens to prefix the current context&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_blank&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;this will suppress blank outputs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;list of tokens ids (or comma-separated token ids) to suppress &quot;-1&quot; will suppress a set of symbols as defined in `tokenizer.non_speech_tokens()`&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;-1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;without_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;use &lt;|notimestamps|&gt; to sample text tokens only&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_initial_timestamp&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the initial timestamp cannot be later than this&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;fp16&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;use fp16 for most of the calculation&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.model_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.device" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">device</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s2">&quot;device&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.download_root" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">download_root</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">download_root</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;download_root&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.in_memory" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">in_memory</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">in_memory</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;in_memory&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.verbose" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">verbose</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">verbose</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.temperature" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">temperature</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">temperature</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.compression_ratio_threshold" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">compression_ratio_threshold</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">compression_ratio_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;compression_ratio_threshold&quot;</span><span class="p">,</span>
    <span class="n">model_config</span><span class="p">,</span>
    <span class="n">config_schema</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.logprob_threshold" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logprob_threshold</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">logprob_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;logprob_threshold&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.no_speech_threshold" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">no_speech_threshold</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">no_speech_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;no_speech_threshold&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.condition_on_previous_text" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">condition_on_previous_text</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">condition_on_previous_text</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;condition_on_previous_text&quot;</span><span class="p">,</span>
    <span class="n">model_config</span><span class="p">,</span>
    <span class="n">config_schema</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.decode_options" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decode_options</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">decode_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span>
        <span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">config_schema</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_model.WhisperModel.model" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">model_type</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span>
    <span class="n">download_root</span><span class="o">=</span><span class="n">download_root</span><span class="p">,</span>
    <span class="n">in_memory</span><span class="o">=</span><span class="n">in_memory</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.whisper_model.WhisperModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whisper_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">audio</span> <span class="o">=</span> <span class="n">whisper</span><span class="o">.</span><span class="n">load_audio</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span>
                                   <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
                                   <span class="n">temperature</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
                                   <span class="n">compression_ratio_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compression_ratio_threshold</span><span class="p">,</span>
                                   <span class="n">logprob_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logprob_threshold</span><span class="p">,</span>
                                   <span class="n">no_speech_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">no_speech_threshold</span><span class="p">,</span>
                                   <span class="n">condition_on_previous_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">condition_on_previous_text</span><span class="p">,</span>
                                   <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">decode_options</span><span class="p">)</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="n">pysubs2</span><span class="o">.</span><span class="n">load_from_whisper</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.whisper_timestamped_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">whisper_timestamped_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>whisper_timestamped</p>
<p>See <a href="https://github.com/linto-ai/whisper-timestamped">linto-ai/whisper-timestamped</a></p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">WhisperTimeStamped</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">WhisperTimeStamped</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="p">{})</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/whisper_timestamped_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="o">=</span><span class="p">{}):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WhisperTimeStamped</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="n">model_config</span><span class="p">,</span>
                                             <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;segment_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">download_root</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;download_root&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">in_memory</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;in_memory&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">compression_ratio_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;compression_ratio_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logprob_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;logprob_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">no_speech_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;no_speech_threshold&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">condition_on_previous_text</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;condition_on_previous_text&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">decode_options</span> <span class="o">=</span> \
        <span class="p">{</span><span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">)}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">whisper_timestamped</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_type</span><span class="p">,</span>
                                                <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
                                                <span class="n">download_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">download_root</span><span class="p">,</span>
                                                <span class="n">in_memory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">in_memory</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;linto-ai/whisper-timestamped&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;One of the official model names listed by `whisper.available_models()`, or path to a model checkpoint containing the model dimensions and the model state_dict.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">available_models</span><span class="p">(),</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;segment_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whisper_timestamps gives the ability to have word-level timestamps, Choose here between sentence-level and word-level&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sentence&quot;</span><span class="p">,</span> <span class="s2">&quot;word&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;sentence&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The PyTorch device to put the model into&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">get_available_devices</span><span class="p">()],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;download_root&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Path to download the model files; by default, it uses &#39;~/.cache/whisper&#39;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;in_memory&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;whether to preload the model weights into host memory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to display the text being decoded to the console. If True, displays all the details,If False, displays minimal details. If None, does not display anything&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature for sampling. It can be a tuple of temperatures, which will be successively used upon failures according to either `compression_ratio_threshold` or `logprob_threshold`.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="p">},</span>
    <span class="s2">&quot;compression_ratio_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the gzip compression ratio is above this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">2.4</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;logprob_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the average log probability over sampled tokens is below this value, treat as failed&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;no_speech_threshold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If the no_speech probability is higher than this value AND the average log probability over sampled tokens is below `logprob_threshold`, consider the segment as silent&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;condition_on_previous_text&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;if True, the previous output of the model is provided as a prompt for the next window; disabling may make the text inconsistent across windows, but the model becomes less prone to getting stuck in a failure loop, such as repetition looping or timestamps going out of sync.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;whether to perform X-&gt;X &#39;transcribe&#39; or X-&gt;English &#39;translate&#39;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;transcribe&quot;</span><span class="p">,</span> <span class="s2">&quot;translate&quot;</span><span class="p">],</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;language that the audio is in; uses detected language if None&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;sample_len&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;maximum number of tokens to sample&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;best_of&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of independent samples to collect, when t &gt; 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;beam_size&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;number of beams in beam search, when t == 0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;patience&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;patience in beam search (https://arxiv.org/abs/2204.05424)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;length_penalty&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;alpha&#39; in Google NMT, None defaults to length norm&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;list of tokens ids (or comma-separated token ids) to suppress &quot;-1&quot; will suppress a set of symbols as defined in `tokenizer.non_speech_tokens()`&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;-1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;fp16&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;use fp16 for most of the calculation&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;remove_punctuation_from_words&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If False, words will be glued with the next punctuation mark (if any).If True, there will be no punctuation mark in the `words[:][&#39;text&#39;]` list.It only affects these strings; This has no influence on the computation of the word confidence, whatever the value of `include_punctuation_in_confidence` is.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;refine_whisper_precision&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;How much can we refine Whisper segment positions, in seconds. Must be a multiple of 0.02.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;min_word_duration&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Minimum duration of a word, in seconds. If a word is shorter than this, timestamps will be adjusted.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.04</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;plot_word_alignment&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to plot the word alignment for each segment. matplotlib must be installed to use this option.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;seed&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Random seed to use for temperature sampling, for the sake of reproducibility.Choose None for unpredictable randomness&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;vad&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to perform voice activity detection (VAD) on the audio file, to remove silent parts before transcribing with Whisper model. This should decrease hallucinations from the Whisper model.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;detect_disfluencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;Whether to detect disfluencies (i.e. hesitations, filler words, repetitions, corrections, etc.) that Whisper model might have omitted in the transcription. This should make the word timestamp prediction more accurate.And probable disfluencies will be marked as special words &quot;[*]&quot;&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;trust_whisper_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to rely on Whisper&#39;s timestamps to get approximative first estimate of segment positions (up to refine_whisper_precision).&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;naive_approach&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Force the naive approach that consists in decoding twice the audio file, once to get the transcription and once with the decoded tokens to get the alignment. Note that this approach is used anyway when beam_size is not None and/or when the temperature is a list with more than one element.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.model_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.segment_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">segment_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">segment_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;segment_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.device" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">device</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">device</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s2">&quot;device&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.download_root" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">download_root</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">download_root</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;download_root&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.in_memory" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">in_memory</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">in_memory</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;in_memory&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.verbose" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">verbose</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">verbose</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;verbose&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.temperature" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">temperature</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">temperature</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.compression_ratio_threshold" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">compression_ratio_threshold</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">compression_ratio_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;compression_ratio_threshold&quot;</span><span class="p">,</span>
    <span class="n">model_config</span><span class="p">,</span>
    <span class="n">config_schema</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.logprob_threshold" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logprob_threshold</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">logprob_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;logprob_threshold&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.no_speech_threshold" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">no_speech_threshold</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">no_speech_threshold</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;no_speech_threshold&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.condition_on_previous_text" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">condition_on_previous_text</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">condition_on_previous_text</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;condition_on_previous_text&quot;</span><span class="p">,</span>
    <span class="n">model_config</span><span class="p">,</span>
    <span class="n">config_schema</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.decode_options" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decode_options</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">decode_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">_load_config</span><span class="p">(</span>
        <span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">config_schema</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.model" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">model_type</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">,</span>
    <span class="n">download_root</span><span class="o">=</span><span class="n">download_root</span><span class="p">,</span>
    <span class="n">in_memory</span><span class="o">=</span><span class="n">in_memory</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.whisper_timestamped_model.WhisperTimeStamped.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whisper_timestamped_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">audio</span> <span class="o">=</span> <span class="n">whisper_timestamped</span><span class="o">.</span><span class="n">load_audio</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">whisper_timestamped</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">audio</span><span class="p">,</span>
                                             <span class="n">verbose</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">,</span>
                                             <span class="n">temperature</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
                                             <span class="n">compression_ratio_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compression_ratio_threshold</span><span class="p">,</span>
                                             <span class="n">logprob_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logprob_threshold</span><span class="p">,</span>
                                             <span class="n">no_speech_threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">no_speech_threshold</span><span class="p">,</span>
                                             <span class="n">condition_on_previous_text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">condition_on_previous_text</span><span class="p">,</span>
                                             <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">decode_options</span>
                                             <span class="p">)</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">==</span> <span class="s1">&#39;word&#39;</span><span class="p">:</span>  <span class="c1"># word level timestamps</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">segment</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]:</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">word</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]))</span>
                <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">segment_type</span> <span class="o">==</span> <span class="s1">&#39;sentence&#39;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]:</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="n">pysubs2</span><span class="o">.</span><span class="n">make_time</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">segment</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]))</span>
            <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">segment</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown `segment_type` value, it should be one of the following: &#39;</span>
                        <span class="sa">f</span><span class="s1">&#39; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">[</span><span class="s2">&quot;segment_type&quot;</span><span class="p">][</span><span class="s2">&quot;options&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="subsai.models.whispercpp_model" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">whispercpp_model</span>


</h3>

    <div class="doc doc-contents ">

        <p>Whisper.cpp Model</p>
<p>See <a href="https://github.com/ggerganov/whisper.cpp">whisper.cpp</a>,
See <a href="https://github.com/abdeladim-s/pywhispercpp/">pywhispercpp</a></p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h4 id="subsai.models.whispercpp_model.WhisperCppModel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">WhisperCppModel</span>


</h4>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">WhisperCppModel</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="subsai.models.abstract_model.AbstractModel" href="#subsai.models.abstract_model.AbstractModel">AbstractModel</a></code></p>







                  <details class="quote">
                    <summary>Source code in <code>src/subsai/models/whispercpp_model.py</code></summary>
                    <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_config</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WhisperCppModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_config</span><span class="o">=</span><span class="n">model_config</span><span class="p">,</span>
                                       <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
    <span class="c1"># config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="s1">&#39;model_type&#39;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
            <span class="n">config_value</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_schema</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">config_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">config</span><span class="p">]</span> <span class="o">=</span> <span class="n">config_value</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_type</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whispercpp_model.WhisperCppModel.model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;ggerganov/whisper.cpp&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whispercpp_model.WhisperCppModel.config_schema" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_schema</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">config_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Available whisper.cpp models&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">AVAILABLE_MODELS</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;base&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;n_threads&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Number of threads to allocate for the inferencedefault to min(4, available hardware_concurrency)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;n_max_text_ctx&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;max tokens to use from past text as prompt for the decoder&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">16384</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;offset_ms&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;start offset in ms&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;duration_ms&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;audio duration to process in ms&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;translate&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;whether to translate the audio to English&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;no_context&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;do not use past transcription (if any) as initial prompt for the decoder&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;single_segment&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;force single segment output (useful for streaming)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;print_special&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;print special tokens (e.g. &lt;SOT&gt;, &lt;EOT&gt;, &lt;BEG&gt;, etc.)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;print_progress&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;print progress information&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;print_realtime&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;print results from within whisper.cpp (avoid it, use callback instead)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;print_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;print timestamps for each text segment when printing realtime&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;token_timestamps&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;enable token-level timestamps&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;thold_pt&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp token probability threshold (~0.01)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;thold_ptsum&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp token sum probability threshold (~0.01)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_len&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;max segment length in characters&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;split_on_word&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;split on word rather than on token (when used with max_len)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;max tokens per segment (0 = no limit)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;speed_up&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;speed-up the audio by 2x using Phase Vocoder&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;audio_ctx&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;overwrite the audio context size (0 = use default)&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;prompt_n_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;tokens to provide to the whisper decoder as initial prompt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;for auto-detection, set to None, &quot;&quot; or &quot;auto&quot;&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_blank&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;common decoding parameters&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;suppress_non_speech_tokens&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;common decoding parameters&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;initial decoding temperature&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;max_initial_ts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;max_initial_ts&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;length_penalty&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;length_penalty&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;temperature_inc&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;temperature_inc&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;entropy_thold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;similar to OpenAI</span><span class="se">\&#39;</span><span class="s1">s &quot;compression_ratio_threshold&quot;&#39;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">2.4</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;logprob_thold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;logprob_thold&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;no_speech_thold&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;no_speech_thold&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;greedy&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;greedy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;best_of&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;beam_search&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;beam_search&quot;</span><span class="p">,</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;beam_size&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;patience&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whispercpp_model.WhisperCppModel.model_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model_type</span> <span class="o">=</span> <span class="n">_load_config</span><span class="p">(</span>
    <span class="s2">&quot;model_type&quot;</span><span class="p">,</span> <span class="n">model_config</span><span class="p">,</span> <span class="n">config_schema</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whispercpp_model.WhisperCppModel.params" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">params</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="subsai.models.whispercpp_model.WhisperCppModel.model" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model_type</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>



<div class="doc doc-object doc-function">


<h5 id="subsai.models.whispercpp_model.WhisperCppModel.transcribe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">transcribe</span>


</h5>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="nf">transcribe</span><span class="p">(</span><span class="n">media_file</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

            <details class="quote">
              <summary>Source code in <code>src/subsai/models/whispercpp_model.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">media</span><span class="o">=</span><span class="n">media_file</span><span class="p">)</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="n">SSAFile</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">seg</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">SSAEvent</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">seg</span><span class="o">.</span><span class="n">t0</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">seg</span><span class="o">.</span><span class="n">t1</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">event</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">seg</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">subs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="subsai.configs" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">subsai.configs</span>


</h2>

    <div class="doc doc-contents first">

        <p>Configurations file</p>








  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="subsai.configs.AVAILABLE_MODELS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">AVAILABLE_MODELS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">AVAILABLE_MODELS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;openai/whisper&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">WhisperModel</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whisper is a general-purpose speech recognition model. It is trained on a large dataset of diverse audio and is also a multi-task model that can perform multilingual speech recognition as well as speech translation and language identification.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/openai/whisper&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;linto-ai/whisper-timestamped&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">WhisperTimeStamped</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Multilingual Automatic Speech Recognition with word-level timestamps and confidence.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/linto-ai/whisper-timestamped&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;ggerganov/whisper.cpp&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">WhisperCppModel</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;High-performance inference of OpenAI&#39;s Whisper automatic speech recognition (ASR) model</span><span class="se">\n</span><span class="s2">* Plain C/C++ implementation without dependencies</span><span class="se">\n</span><span class="s2">* Runs on the CPU</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/ggerganov/whisper.cpp</span><span class="se">\n</span><span class="s2">https://github.com/abdeladim-s/pywhispercpp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;guillaumekln/faster-whisper&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">FasterWhisperModel</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;**faster-whisper** is a reimplementation of OpenAI&#39;s Whisper model using [CTranslate2](https://github.com/OpenNMT/CTranslate2/), which is a fast inference engine for Transformer models.</span><span class="se">\n</span><span class="s2">This implementation is up to 4 times faster than [openai/whisper]( https://github.com/openai/whisper) for the same accuracy while using less memory. The efficiency can be further improved with 8-bit quantization on both CPU and GPU.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/guillaumekln/faster-whisper&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;m-bain/whisperX&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">WhisperXModel</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;**whisperX** is a fast automatic speech recognition (70x realtime with large-v2) with word-level timestamps and speaker diarization.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/m-bain/whisperX&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;jianfch/stable-ts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">StableTsModel</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;**Stabilizing Timestamps for Whisper** This library modifies [Whisper](https://github.com/openai/whisper) to produce more reliable timestamps and extends its functionality.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/jianfch/stable-ts&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;API/openai/whisper&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">WhisperAPIModel</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;API for the OpenAI large-v2 Whisper model, requires an API key.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://platform.openai.com/docs/guides/speech-to-text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;HuggingFace&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="n">HuggingFaceModel</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Hugging Face implementation of Whisper. Any speech recognition pretrained model from the Hugging Face hub can be used as well&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://huggingface.co/tasks/automatic-speech-recognition&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="n">config_schema</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="subsai.configs.BASIC_TOOLS_CONFIGS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">BASIC_TOOLS_CONFIGS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">BASIC_TOOLS_CONFIGS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;set time&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set time to a subtitle&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;hours: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;m&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;minutes: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;s&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;seconds: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;ms&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;milliseconds: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;shift&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Shift all subtitles by constant time amount&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;hours: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;m&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;minutes: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;s&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;seconds: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;ms&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;milliseconds: Integer or float values, may be positive or negative&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;frames&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;When specified, must be an integer number of frames&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;fps&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;When specified, must be a positive number.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="subsai.configs.ADVANCED_TOOLS_CONFIGS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">ADVANCED_TOOLS_CONFIGS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span class="n">ADVANCED_TOOLS_CONFIGS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ffsubsync&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Language-agnostic automatic synchronization of subtitles with video, so that subtitles are aligned to the correct starting point within the video.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/smacke/ffsubsync&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;vad&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Which voice activity detector to use for speech extraction (if using video / audio as a reference&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;subs_then_webrtc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;webrtc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;subs_then_auditok&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;auditok&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;subs_then_silero&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;silero&quot;</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">DEFAULT_VAD</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;max-subtitle-seconds&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Maximum duration for a subtitle to appear on-screen&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">DEFAULT_MAX_SUBTITLE_SECONDS</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;start-seconds&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Start time for processing&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">DEFAULT_START_SECONDS</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;max-offset-seconds&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The max allowed offset seconds for any subtitle segment&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">DEFAULT_MAX_OFFSET_SECONDS</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;apply-offset-seconds&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Apply a predefined offset in seconds to all subtitle segments&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">DEFAULT_APPLY_OFFSET_SECONDS</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;suppress-output-if-offset-less-than&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Apply a predefined offset in seconds to all subtitle segments&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;frame-rate&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Frame rate for audio extraction&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">DEFAULT_FRAME_RATE</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;output-encoding&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;What encoding to use for writing output subtitles (default=utf-8). Can indicate &quot;same&quot; to use same encoding as that of the input.&#39;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;skip-infer-framerate-ratio&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If set, do not try to infer framerate ratio based on duration ratio.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;no-fix-framerate&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If specified, subsync will not attempt to correct a framerate&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;serialize-speech&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If specified, serialize reference speech to a numpy array.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;gss&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;If specified, use golden-section search to try to findthe optimal framerate ratio between video and subtitles.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;Translation&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Translate to different languages using AI&quot;</span><span class="p">,</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/xhluca/dl-translate&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_schema&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The model&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">available_translation_models</span><span class="p">(),</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">available_translation_models</span><span class="p">()[</span>
                    <span class="mi">0</span>
                <span class="p">],</span>
            <span class="p">},</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s1">&#39;&quot;cpu&quot;, &quot;gpu&quot; or &quot;auto&quot;. If it</span><span class="se">\&#39;</span><span class="s1">s set to &quot;auto&quot;, will try to select a GPU when available or else fall back to CPU&#39;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
                    <span class="o">*</span><span class="n">get_available_devices</span><span class="p">(),</span>
                <span class="p">],</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The number of samples to load at once. If set to `None`, it will process everything at once</span><span class="se">\n</span><span class="s2">A smaller value is preferred for `batch_size` if your (video) RAM is limited&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Whether to display the progress bar for every batch processed.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">
    </div>

</div>





  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 <a href="https://github.com/abdeladim-s"  target="_blank" rel="noopener">abdeladim-s</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/abdeladim-s/subsai" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>